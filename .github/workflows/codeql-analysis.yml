name: "CodeQL"

on:
    push:
        branches:
            - main
    pull_request:
        # The branches below must be a subset of the branches above
        branches:
            - main
    schedule:
        - cron: '0 3 * * 0'

jobs:
    codeql:
        permissions:
            actions: read
            contents: read
            security-events: write

        runs-on: ubuntu-latest

        strategy:
            fail-fast: false
            matrix:
                language: [ 'typescript' ]

        steps:
        - name: Checkout repository
          uses: actions/checkout@v4

        - name: Initialize CodeQL
          uses: github/codeql-action/init@v3
          with:
                languages: ${{ matrix.language }}
                config: |
                    paths-ignore:
                    - '/tests/**'
                    - '/shell/**'
        - name: Perform CodeQL Analysis
          uses: github/codeql-action/analyze@v3
          with:
            category: "/language:${{ matrix.language }}"
