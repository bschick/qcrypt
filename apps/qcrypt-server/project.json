{
  "name": "qcrypt-server",
  "$schema": "../../node_modules/nx/schemas/project-schema.json",
  "projectType": "application",
  "sourceRoot": "apps/qcrypt-server/src",
  "targets": {
    "build": {
      "executor": "nx:run-commands",
      "options": {
        "commands": [
          "pnpm exec esbuild --bundle --platform=node --target=es2022 --outdir=apps/qcrypt-server/build apps/qcrypt-server/src/index.ts",
          "rm -f apps/qcrypt-server/build/index.zip && zip -j apps/qcrypt-server/build/index.zip apps/qcrypt-server/build/index.js apps/qcrypt-server/assets/combined_aaguid.json"
        ],
        "cwd": "{workspaceRoot}",
        "parallel": false
      },
      "outputs": ["{projectRoot}/build"]
    },
    "build-min": {
      "executor": "nx:run-commands",
      "options": {
        "commands": [
          "pnpm exec esbuild --bundle --minify --platform=node --target=es2022 --outdir=apps/qcrypt-server/build apps/qcrypt-server/src/index.ts",
          "rm -f apps/qcrypt-server/build/index.zip && zip -j apps/qcrypt-server/build/index.zip apps/qcrypt-server/build/index.js apps/qcrypt-server/assets/combined_aaguid.json"
        ],
        "cwd": "{workspaceRoot}",
        "parallel": false
      },
      "outputs": ["{projectRoot}/build"]
    },
    "test": {
      "executor": "nx:run-commands",
      "options": {
        "command": "pnpm exec vitest run --config apps/qcrypt-server/vitest.config.ts",
        "cwd": "{workspaceRoot}"
      }
    },
    "test-prod": {
      "executor": "nx:run-commands",
      "options": {
        "command": "QC_ENV=prod pnpm exec vitest run --config apps/qcrypt-server/vitest.config.ts",
        "cwd": "{workspaceRoot}"
      }
    }
  }
}
